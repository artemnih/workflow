<div class="tree">
  <ng-container *ngTemplateOutlet="tree; context: { nodes: allNodes }"> </ng-container>
</div>

<ng-template #tree let-nodes="nodes">
  <div *ngFor="let node of nodes">
    <div class="plugin" [attr.draggable]="!!node.type" [attr.data-type]="node.type" (dragstart)="start($event)">
      <i (click)="node.expanded = !node.expanded" [ngClass]="node.expanded ? node.expandedIcon || node.icon : node.icon"></i> {{ node.name }}
    </div>

    <div class="children" *ngIf="node.expanded">
      <ng-container *ngTemplateOutlet="tree; context: { nodes: node.children }"> </ng-container>
    </div>
  </div>
</ng-template>